// ==UserScript==
// @name         Hangouts Web Desktop Notifications
// @version      0.0.10
// @description  Adds desktop notifications for https://hangouts.google.com
// @author       Victor Holz
// @downloadURL  https://github.com/vicholz/userscripts/raw/master/Hangouts%20Web%20Desktop%20Notifications.user.js
// @updateURL    https://github.com/vicholz/userscripts/raw/master/Hangouts%20Web%20Desktop%20Notifications.user.js
// @match        https://hangouts.google.com/*
// @grant        GM_notification
// @grant        window.focus
// @grant        unsafeWindow
// @run-at       document-end
// @noframes
// ==/UserScript==

(function() {
    if (window.top !== window.self) return;
    'use strict';
    window.icon = "data:image/png;base64,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"

    function notify(message, title){
        GM_notification(message, title, window.icon, function(){
            try {
                unsafeWindow.focus();
            } catch(e) {
                console.log(e);
            }
        });
    }

    window.loader = setInterval(function(){
        load()
    }, 1000);

    function load(){
        if (window.loaded) return;
        window.lastChat = "";
        try {
            var targetNode = document.querySelector("#hangout-landing-chat").querySelector("iframe").contentDocument.querySelector("div[aria-label='Conversations'");

            // Options for the observer (which mutations to observe)
            var config = { attributes: false, childList: true, subtree: false };

            // Callback function to execute when mutations are observed
            var callback = function(mutationsList, observer) {
                var firstMutation = mutationsList[0];
                if (firstMutation.type == "childList"){
                    var mutation = firstMutation.target;
                    var firstChat = mutation.firstChild;
                    if (targetNode.firstChild === firstChat){
                        var name = firstChat.querySelector("span").innerText;
                        var text = firstChat.firstChild.firstChild.firstChild.nextSibling.nextSibling.innerText;
                        console.log(firstChat.firstChild.firstChild.firstChild.nextSibling.nextSibling);
                        if (window.lastChat !== name + ": " + text && !/^You:/.test(text)) {
                            window.lastChat = name + ": " + text;
                            console.log(name + ": " + text);
                            notify(text, name);
                        }
                    }
                }
            }

            // Create an observer instance linked to the callback function
            var observer = new MutationObserver(callback);

            // Start observing the target node for configured mutations
            console.log("Starting observer...");
            observer.observe(targetNode, config);
            clearInterval(window.loader);
            window.loaded = true;
        } catch (e) {
            console.log("[Hangouts Web Desktop Notifications] Hangouts is not ready yet... will try again...")
        }
    }
})();
